var P=a=>{throw TypeError(a)};var I=(a,n,e)=>n.has(a)||P("Cannot "+e);var h=(a,n,e)=>(I(a,n,"read from private field"),e?e.call(a):n.get(a)),C=(a,n,e)=>n.has(a)?P("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(a):n.set(a,e),p=(a,n,e,x)=>(I(a,n,"write to private field"),x?x.call(a,e):n.set(a,e),e),w=(a,n,e)=>(I(a,n,"access private method"),e);var A=(a,n,e,x)=>({set _(i){p(a,n,i,e)},get _(){return h(a,n,x)}});import{w as X,x as Y,v as Z,a as c,o as t,t as R}from"./chunk-NL6KNZEE-BnoZhxP3.js";import{s as l}from"./style.module-CK8-J01x.js";function re({}){return[{title:"Score Tracker"},{name:"description",content:"Bao Phung Homepage"}]}const ae=X(function(){var S,N,d,b,U;const n=Y(),{format:e}=n.state||{format:null},x=Z(),[i,g]=c.useState(""),[M,K]=c.useState(!0),V=c.useRef(null),$=c.useRef(null),[j,D]=c.useState(1),[m,F]=c.useState(1),T=e==="8"||e==="12"?24:12,[o,H]=c.useState([]),[v,q]=c.useState([]),[y,L]=c.useState(!0),[B,O]=c.useState(!1);class E{constructor(s){C(this,b);C(this,S);C(this,N);C(this,d);p(this,S,s),p(this,N,0),p(this,d,parseInt(e))}getName(){return h(this,S)}getScore(){return h(this,N)}getEntries(){return h(this,d)}setEntry(s){return h(this,d)>0?(w(this,b,U).call(this,s),A(this,d)._--,!0):(alert(`No more entries available for ${h(this,S)}.`),!1)}resetEntries(){h(this,d)===0&&p(this,d,parseInt(e))}}S=new WeakMap,N=new WeakMap,d=new WeakMap,b=new WeakSet,U=function(s){let k;if(T===12)k=[15,12,10,9,8,7,6,5,4,3,2,1];else if(T===24)k=[15,12,10,9,9,8,8,7,7,6,6,6,5,5,5,4,4,4,3,3,3,2,2,1];else return;p(this,N,h(this,N)+k[s-1])};function z(){return t.jsxs("form",{onSubmit:J,id:l.scoreTrackerTeamSubmitForm,children:[t.jsx("label",{htmlFor:"teamNameInput",children:"Enter Team Name:"}),t.jsx("input",{type:"text",id:"teamNameInput",name:"teamNameInput",value:i,onChange:r=>g(r.target.value),ref:V,style:{backgroundColor:"white",color:"black"},required:!0,autoFocus:!0})]})}function G(){let r;return m===1||m===21?r="st":m===2||m===22?r="nd":m===3||m===23?r="rd":r="th",t.jsxs("form",{onSubmit:Q,id:l.scoreTrackerScoreSubmitForm,children:[t.jsxs("label",{htmlFor:"teamScoreInput",children:["Enter team for ",m,r," place: "]}),t.jsx("input",{type:"text",id:"teamScoreInput",name:"score",value:i,onChange:s=>g(s.target.value),ref:$,readOnly:!M,style:{backgroundColor:"white",color:"black"},required:!0,autoFocus:!0})]})}function J(r){r.preventDefault(),W(),g("")}function Q(r){if(r.preventDefault(),i===""||i===null||i===void 0){alert("Please enter a team.");return}const s=o.findIndex(u=>{var f;return((f=u.getName().at(0))==null?void 0:f.toUpperCase())===i.at(0).toUpperCase()}),k=v.findIndex(u=>{var f;return u.getName().at(0).toUpperCase()===((f=i.at(0))==null?void 0:f.toUpperCase())});if(s===-1){alert(`Team ${i} not found. Please enter an existing team.`),g("");return}if(o[s].getEntries()===0){alert(`Team ${i} has no more entries.`),g("");return}if(o[s].setEntry(m),v[k].setEntry(m),F(m+1),m===T){F(1),D(j+1);for(let u=0;u<o.length;u++)o.at(u).resetEntries(),v.at(u).resetEntries()}g(""),o.sort((u,f)=>f.getScore()-u.getScore())}function W(){if(i.trim().length>10){alert("The desired team cannot have more than 10 characters.");return}if(i.trim().length===0){alert("Please enter a team (white space is not counted).");return}for(let r=0;r<o.length;r++)if(o.at(r).getName().charAt(0).toUpperCase()===i.charAt(0).toUpperCase()){alert(`A team with that tag (${i.charAt(0).toUpperCase()}) already exists.`);return}H([...o,new E(i.trim())])}return c.useEffect(()=>{(async()=>{if(e==null||e!=="2"&&e!=="3"&&e!=="4"&&e!=="6"&&e!=="8"&&e!=="12"){alert("No/Invalid format selected. Please go back and select a format."),x("/MarioKart");return}})()},[]),c.useEffect(()=>{if(y&&T/parseInt(e)===o.length){alert("Maximum number of teams reached"),L(!1),O(!0);let r=[];for(let s=0;s<o.length;s++)r.push(new E(o[s].getName()));q(r)}},[o]),c.useEffect(()=>{j===13&&(alert("The mogi is over!"),K(!1))},[j]),e==null||e!=="2"&&e!=="3"&&e!=="4"&&e!=="6"&&e!=="8"&&e!=="12"?t.jsxs("div",{className:l.scoreTrackerContainer,children:[t.jsx("div",{className:l.title,children:t.jsx("h1",{id:l.scoreTrackerTitle,children:"Score Tracker"})}),t.jsx("div",{id:l.scoreTrackerContent,children:t.jsxs("p",{children:["No/Invalid format selected. Please ",t.jsx(R,{to:"/MarioKart",children:"Click Here"})," to go back and select a format."]})})]}):t.jsxs("div",{className:l.scoreTrackerContainer,children:[t.jsx("div",{className:l.title,children:t.jsxs("h1",{id:l.scoreTrackerTitle,children:[e,"v",e," Score Tracker"]})}),t.jsxs("div",{id:l.scoreTrackerContent,children:[t.jsxs("p",{children:["This is a page about the score tracker for the ",e,"v",e," format."]}),t.jsxs("p",{children:[t.jsx(R,{to:"/MarioKart",children:"Click Here"})," to return to the Mario Kart page."]}),t.jsx("div",{className:l.scoreTrackerTeamsContainer,children:t.jsxs("div",{className:l.teamNameDisplay,children:[j<=12&&T/parseInt(e)===o.length&&t.jsxs("p",{children:["Race #",j]}),j>12&&t.jsx("p",{children:"Mogi is over!"}),t.jsx("br",{}),o.map((r,s)=>t.jsxs("span",{children:[r.getName()," (",r.getScore(),") ",s<o.length-1?" | ":""]},r.getName())),t.jsx("br",{}),t.jsx("br",{}),v!=null&&t.jsxs(t.Fragment,{children:[T/parseInt(e)===o.length&&t.jsxs(t.Fragment,{children:[t.jsx("p",{children:"Number of entries: "}),t.jsx("br",{})]}),v.map((r,s)=>t.jsxs("span",{children:[r.getName()," (",r.getEntries(),") ",s<o.length-1?" | ":""]},s+o.length))]})]})}),t.jsxs("div",{className:l.scoreTrackerFormContainer,children:[y&&t.jsx(z,{}),B&&t.jsx(G,{})]})]})]})});export{ae as default,re as meta};
